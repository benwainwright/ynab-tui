{"version":3,"sources":["../../../../src/components/table/table.tsx"],"sourcesContent":["import { Box, DOMElement, measureElement, Text } from 'ink'\nimport { useState } from 'react'\n\nexport type Scalar = string | number | boolean | null | undefined\n\ntype ScalarDict = {\n  [key: string]: Scalar\n}\n\ninterface TableProps<T extends ScalarDict> {\n  onPageChange?: (page: number) => void\n  start?: number\n  end?: number\n  data: T[]\n  cellComponents?: (\n    | (<V extends Scalar>(config: { value: V }) => React.ReactNode)\n    | undefined\n  )[]\n}\n\nexport const Table = <T extends ScalarDict>({\n  start,\n  end,\n  data,\n  cellComponents,\n}: TableProps<T>) => {\n  const headerRow = Object.entries(data[0]).map(([key]) => key)\n\n  const rows = data.map((row) =>\n    Object.entries(row).map(([key, value]) => value),\n  )\n\n  const all = [headerRow, ...rows]\n\n  const startWidths = Array.from({\n    length: Object.entries(data[0]).length,\n  }).map(() => ({ length: 0, content: '' }))\n\n  const widths = all\n    .reduce<{ length: number; content: string }[]>((previousWidths, row) => {\n      return previousWidths.map((maxWidth, i) => {\n        if (maxWidth.length > String(row[i]).length) {\n          return maxWidth\n        } else {\n          return { length: String(row[i]).length, content: String(row[i]) }\n        }\n      })\n    }, startWidths)\n    .map((item) => ({ ...item, length: item.length + 4 }))\n\n  const headerBoxes = (\n    <Box flexDirection=\"row\">\n      {headerRow.map((header, i) => (\n        <Box\n          key={`header-cell-${header}`}\n          width={widths[i].length}\n          paddingX={1}\n        >\n          <Text color=\"green\" bold>\n            {header}\n          </Text>\n        </Box>\n      ))}\n    </Box>\n  )\n\n  const contentBoxes = rows\n    .slice(start ?? 0, end ?? data.length)\n    .map((row, i) => (\n      <Box\n        flexDirection=\"row\"\n        key={`table-row-${i}`}\n        borderTop={true}\n        borderLeft={false}\n        borderRight={false}\n        borderBottom={false}\n        borderStyle=\"single\"\n      >\n        {row.map((cell, ic) => {\n          const CellComponent = cellComponents?.[ic]\n          return (\n            <Box\n              borderBottom={false}\n              borderTop={false}\n              borderStyle=\"single\"\n              borderRight={false}\n              borderLeft={ic > 0 ? true : false}\n              key={`cell-${cell}-${ic}`}\n              width={widths[ic].length}\n              paddingX={1}\n            >\n              <Text wrap=\"truncate-end\">\n                {CellComponent ? <CellComponent value={cell} /> : cell}\n              </Text>\n            </Box>\n          )\n        })}\n      </Box>\n    ))\n\n  return (\n    <Box flexDirection=\"column\" borderStyle={'single'} width={'100%'}>\n      {headerBoxes}\n      {contentBoxes}\n    </Box>\n  )\n}\n"],"names":["Box","Text","Table","start","end","data","cellComponents","headerRow","Object","entries","map","key","rows","row","value","all","startWidths","Array","from","length","content","widths","reduce","previousWidths","maxWidth","i","String","item","headerBoxes","flexDirection","header","width","paddingX","color","bold","contentBoxes","slice","borderTop","borderLeft","borderRight","borderBottom","borderStyle","cell","ic","CellComponent","wrap"],"mappings":";AAAA,SAASA,GAAG,EAA8BC,IAAI,QAAQ,MAAK;AAoB3D,OAAO,MAAMC,QAAQ,CAAuB,EAC1CC,KAAK,EACLC,GAAG,EACHC,IAAI,EACJC,cAAc,EACA;IACd,MAAMC,YAAYC,OAAOC,OAAO,CAACJ,IAAI,CAAC,EAAE,EAAEK,GAAG,CAAC,CAAC,CAACC,IAAI,GAAKA;IAEzD,MAAMC,OAAOP,KAAKK,GAAG,CAAC,CAACG,MACrBL,OAAOC,OAAO,CAACI,KAAKH,GAAG,CAAC,CAAC,CAACC,KAAKG,MAAM,GAAKA;IAG5C,MAAMC,MAAM;QAACR;WAAcK;KAAK;IAEhC,MAAMI,cAAcC,MAAMC,IAAI,CAAC;QAC7BC,QAAQX,OAAOC,OAAO,CAACJ,IAAI,CAAC,EAAE,EAAEc,MAAM;IACxC,GAAGT,GAAG,CAAC,IAAO,CAAA;YAAES,QAAQ;YAAGC,SAAS;QAAG,CAAA;IAEvC,MAAMC,SAASN,IACZO,MAAM,CAAwC,CAACC,gBAAgBV;QAC9D,OAAOU,eAAeb,GAAG,CAAC,CAACc,UAAUC;YACnC,IAAID,SAASL,MAAM,GAAGO,OAAOb,GAAG,CAACY,EAAE,EAAEN,MAAM,EAAE;gBAC3C,OAAOK;YACT,OAAO;gBACL,OAAO;oBAAEL,QAAQO,OAAOb,GAAG,CAACY,EAAE,EAAEN,MAAM;oBAAEC,SAASM,OAAOb,GAAG,CAACY,EAAE;gBAAE;YAClE;QACF;IACF,GAAGT,aACFN,GAAG,CAAC,CAACiB,OAAU,CAAA;YAAE,GAAGA,IAAI;YAAER,QAAQQ,KAAKR,MAAM,GAAG;QAAE,CAAA;IAErD,MAAMS,4BACJ,KAAC5B;QAAI6B,eAAc;kBAChBtB,UAAUG,GAAG,CAAC,CAACoB,QAAQL,kBACtB,KAACzB;gBAEC+B,OAAOV,MAAM,CAACI,EAAE,CAACN,MAAM;gBACvBa,UAAU;0BAEV,cAAA,KAAC/B;oBAAKgC,OAAM;oBAAQC,IAAI;8BACrBJ;;eALE,CAAC,YAAY,EAAEA,OAAO,CAAC;;IAYpC,MAAMK,eAAevB,KAClBwB,KAAK,CAACjC,SAAS,GAAGC,OAAOC,KAAKc,MAAM,EACpCT,GAAG,CAAC,CAACG,KAAKY,kBACT,KAACzB;YACC6B,eAAc;YAEdQ,WAAW;YACXC,YAAY;YACZC,aAAa;YACbC,cAAc;YACdC,aAAY;sBAEX5B,IAAIH,GAAG,CAAC,CAACgC,MAAMC;gBACd,MAAMC,gBAAgBtC,gBAAgB,CAACqC,GAAG;gBAC1C,qBACE,KAAC3C;oBACCwC,cAAc;oBACdH,WAAW;oBACXI,aAAY;oBACZF,aAAa;oBACbD,YAAYK,KAAK,IAAI,OAAO;oBAE5BZ,OAAOV,MAAM,CAACsB,GAAG,CAACxB,MAAM;oBACxBa,UAAU;8BAEV,cAAA,KAAC/B;wBAAK4C,MAAK;kCACRD,8BAAgB,KAACA;4BAAc9B,OAAO4B;6BAAWA;;mBAL/C,CAAC,KAAK,EAAEA,KAAK,CAAC,EAAEC,GAAG,CAAC;YAS/B;WAzBK,CAAC,UAAU,EAAElB,EAAE,CAAC;IA6B3B,qBACE,MAACzB;QAAI6B,eAAc;QAASY,aAAa;QAAUV,OAAO;;YACvDH;YACAO;;;AAGP,EAAC"}